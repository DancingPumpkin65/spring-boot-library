<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Details</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 5px; }
        h1 { margin-bottom: 20px; }
        p { margin-bottom: 10px; line-height: 1.6; }
        strong { font-weight: bold; min-width: 150px; display: inline-block; }
        .button-group { margin-top: 20px; }
        .button { padding: 10px 15px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px; border: none; cursor: pointer; margin-right: 10px;}
        .button-secondary { background-color: #6c757d; }
        .button-danger { background-color: #dc3545; }
        .message { padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
<div class="container">
    <h1>Book Details</h1>

    <div th:if="${successMessage}" class="message success" role="alert">
        <p th:text="${successMessage}"></p>
    </div>
     <div th:if="${errorMessage}" class="message error" role="alert">
        <p th:text="${errorMessage}"></p>
    </div>

    <div th:if="${book}">
        <p><strong>ID:</strong> <span th:text="${book.bookId}"></span></p>
        <p><strong>Name:</strong> <span th:text="${book.bookName}"></span></p>
        <p><strong>Author:</strong> <span th:text="${book.bookAuthor}"></span></p>
        <p><strong>Year of Publication:</strong> <span th:text="${book.yearOfPub}"></span></p>
        <p><strong>Price:</strong> <span th:text="${#numbers.formatCurrency(book.price)}"></span></p>
        <p><strong>Status:</strong> <span th:text="${book.status}"></span></p>
        <p><strong>Librarian:</strong> <span th:text="${book.librarian?.name}">Librarian N/A</span></p>
        <p><strong>Borrowed By:</strong>
            <span th:if="${book.borrower}" th:text="${book.borrower.userName}"></span>
            <span th:unless="${book.borrower}">Not borrowed</span>
        </p>
    </div>
    <div th:unless="${book}">
        <p>Book not found.</p>
    </div>

    <div class="button-group">
        <a th:href="@{/books}" class="button button-secondary">Back to List</a>
        <a th:if="${book}" th:href="@{/books/edit/{id}(id=${book.bookId})}" class="button">Edit</a>
        <a th:if="${book}" th:href="@{/books/delete/{id}(id=${book.bookId})}" class="button button-danger" onclick="return confirm('Are you sure you want to delete this book?');">Delete</a>
    </div>
</div>
</body>
</html>
